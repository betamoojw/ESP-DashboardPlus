; PlatformIO Project Configuration File
;
; ESP32-DashboardPlus Library - Example Project
; 
; This configuration file is for building the example project.
; When using the library in your own project, you only need to
; add 'ESP-DashboardPlus' to your lib_deps.
;
; Build commands:
;   pio run              - Build the project
;   pio run -t upload    - Build and upload to ESP32
;   pio run -t monitor   - Open serial monitor

[platformio]
default_envs = esp32dev
src_dir = examples/basic
lib_dir = .

[env]
; Common settings for all environments
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; Pre-build script to convert HTML to header
extra_scripts = 
    pre:scripts/html_to_header_pio.py

; Library dependencies
lib_deps = 
    ESP Async WebServer
    bblanchon/ArduinoJson@^7.0.0
    me-no-dev/AsyncTCP@^1.1.1

; Build flags
build_flags = 
    -DARDUINO_ARCH_ESP32
    -DCORE_DEBUG_LEVEL=0

[env:esp32dev]
platform = espressif32
board = esp32dev
board_build.partitions = default.csv

; Flash settings
board_upload.flash_size = 4MB
board_build.flash_mode = dio

[env:esp32-s3]
platform = espressif32
board = esp32-s3-devkitc-1
board_build.partitions = default.csv

[env:esp32-c3]
platform = espressif32
board = esp32-c3-devkitm-1
board_build.partitions = default.csv

[env:esp8266]
platform = espressif8266
board = nodemcuv2
board_build.ldscript = eagle.flash.4m1m.ld

lib_deps = 
    ESP Async WebServer
    bblanchon/ArduinoJson@^7.0.0
    me-no-dev/ESPAsyncTCP@^1.2.2

build_flags = 
    -DARDUINO_ARCH_ESP8266

; ============================================
; Environment for release builds (optimized)
; ============================================
[env:esp32dev-release]
platform = espressif32
board = esp32dev
board_build.partitions = min_spiffs.csv

build_flags = 
    ${env.build_flags}
    -Os
    -DNDEBUG

; ============================================
; Environment for debug builds
; ============================================
[env:esp32dev-debug]
platform = espressif32
board = esp32dev
board_build.partitions = default.csv

build_flags = 
    ${env.build_flags}
    -DCORE_DEBUG_LEVEL=4
    -DDEBUG

monitor_filters = 
    esp32_exception_decoder
    time
